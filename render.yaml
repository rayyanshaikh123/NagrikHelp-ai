services:
  - type: web
    name: nagrikhelp-ai-server
    env: python
    plan: free
    # BLIP Vision: Vision-language model from HuggingFace (free, no API key needed!)
    buildCommand: |
      set -euo pipefail
      echo "=== Installing BLIP Vision Model (HuggingFace) ==="
      python --version
      pip --version
      
      pip install --upgrade pip
      pip install --no-cache-dir --prefer-binary -r requirements-gemini.txt
      
      
      echo "=== Verifying BLIP installation ==="
      python -c "from transformers import BlipProcessor; print('âœ“ BLIP ready')"
      echo "=== Build complete ==="
      
    startCommand: uvicorn gemini_vision_server:app --host 0.0.0.0 --port $PORT
    
    envVars:
      # AI Validation Configuration
      - key: CONFIDENCE_THRESHOLD
        value: "0.5"
        
    healthCheckPath: /
